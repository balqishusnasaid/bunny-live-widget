<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hopping Bunny</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: transparent;
    }

    html, body {
      height: 100%;
    }

    #bunny-container {
      position: absolute;
      width: 80px;
      height: 80px;
      bottom: 10px;
      left: 0;
      transition: left 0.5s linear;
    }

    #bunny-img {
      width: 100%;
      height: 100%;
      image-rendering: pixelated;
      image-rendering: -moz-crisp-edges;
      image-rendering: crisp-edges;
      object-fit: contain;
    }

    .flipped {
      transform: scaleX(-1);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div id="bunny-container"><img id="bunny-img" src="https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/9879bbcc8bb779a.png" alt="Bunny" onerror="this.style.display='none'; this.alt='Image failed to load';">
  </div>
  <script>
    const defaultConfig = {};
    let config = { ...defaultConfig };

    const IMAGES = {
      hop: 'https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/9879bbcc8bb779a.png',
      idle: 'https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/cdbb596821403bb.png',
      sleep: 'https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/070c84620f96770.png',
      eat: 'https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/0b00814230041e1.png',
      munchUp: 'https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/9242624ba276334.png',
      munchDown: 'https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/2ce1993dbc4968a.png',
      happy: 'https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/1af0be9fe116675.png'
    };

    const container = document.getElementById('bunny-container');
    const bunnyImg = document.getElementById('bunny-img');
    let position = 0;
    let direction = 1;
    let isAnimating = false;

    async function onConfigChange(newConfig) {
      config = { ...newConfig };
    }

    function setImage(imageName) {
      bunnyImg.src = IMAGES[imageName];
    }

    function updateBunnyPosition() {
      container.style.left = position + 'px';
      if (direction === -1) {
        bunnyImg.classList.add('flipped');
      } else {
        bunnyImg.classList.remove('flipped');
      }
    }

    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function performEatSequence() {
      isAnimating = true;
      
      setImage('idle');
      await sleep(300);
      
      setImage('eat');
      await sleep(400);
      
      setImage('munchUp');
      await sleep(300);
      
      setImage('munchDown');
      await sleep(300);
      
      setImage('munchUp');
      await sleep(300);
      
      setImage('happy');
      await sleep(500);
      
      isAnimating = false;
    }

    async function performSleepSequence() {
      isAnimating = true;
      
      setImage('idle');
      await sleep(300);
      
      setImage('sleep');
      await sleep(1000);
      
      setImage('sleep');
      await sleep(1000);
      
      setImage('sleep');
      await sleep(1000);
      
      setImage('idle');
      await sleep(300);
      
      isAnimating = false;
    }

    async function hop() {
      if (isAnimating) return;
      
      const shouldStop = Math.random() < 0.15;
      
      if (shouldStop) {
        const activity = Math.random() < 0.5 ? 'eat' : 'sleep';
        
        if (activity === 'eat') {
          await performEatSequence();
        } else {
          await performSleepSequence();
        }
      }
      
      setImage('hop');
      position += direction * 50;
      
      if (position >= 1286) {
        position = 1286;
        direction = -1;
      } else if (position <= 0) {
        position = 0;
        direction = 1;
      }
      
      updateBunnyPosition();
      await sleep(500);
    }

    function startAnimation() {
      setInterval(hop, 600);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map()
      });
    }

    onConfigChange(defaultConfig);
    startAnimation();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99c9bd5a10edc0c2',t:'MTc2MjgyMTY0MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>